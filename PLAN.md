# План реализации функций кнопок

## Цель
Добавить функционал для трех кнопок: "О чем статья?", "Тезисы", "Пост для Telegram"

## Порядок действий

### 1. Создание API роута для функции "О чем статья?" (summary)
   - **Файл**: `src/app/api/summary/route.ts`
   - **Действия**:
     - Создать новый API роут по аналогии с `/api/translate/route.ts`
     - Реализовать получение контента статьи (через URL или напрямую через `/api/parse`)
     - Настроить промпт для AI: запросить краткое описание статьи на русском языке
     - Использовать OpenRouter API с моделью `deepseek/deepseek-chat`
     - Добавить обработку ошибок и таймауты (120 секунд)
     - Ограничить длину контента (максимум 50000 символов)

### 2. Создание API роута для функции "Тезисы" (theses)
   - **Файл**: `src/app/api/theses/route.ts`
   - **Действия**:
     - Создать новый API роут по аналогии с `/api/translate/route.ts`
     - Реализовать получение контента статьи (через URL или напрямую через `/api/parse`)
     - Настроить промпт для AI: запросить структурированные тезисы статьи в виде списка на русском языке
     - Использовать OpenRouter API с моделью `deepseek/deepseek-chat`
     - Добавить обработку ошибок и таймауты (120 секунд)
     - Ограничить длину контента (максимум 50000 символов)

### 3. Создание API роута для функции "Пост для Telegram" (telegram)
   - **Файл**: `src/app/api/telegram/route.ts`
   - **Действия**:
     - Создать новый API роут по аналогии с `/api/translate/route.ts`
     - Реализовать получение контента статьи (через URL или напрямую через `/api/parse`)
     - Настроить промпт для AI: запросить пост для Telegram на русском языке (формат: краткий, структурированный, с эмодзи, готовый для публикации)
     - Использовать OpenRouter API с моделью `deepseek/deepseek-chat`
     - Добавить обработку ошибок и таймауты (120 секунд)
     - Ограничить длину контента (максимум 50000 символов)

### 4. Обновление фронтенда для интеграции новых API
   - **Файл**: `src/app/page.tsx`
   - **Действия**:
     - Обновить функцию `handleAction` для обработки типов `"summary"`, `"theses"`, `"telegram"`
     - Добавить вызовы соответствующих API эндпоинтов (`/api/summary`, `/api/theses`, `/api/telegram`)
     - Передавать URL статьи в запросах
     - Обработать ответы и отобразить результаты в блоке результата
     - Добавить обработку ошибок и таймаутов (150 секунд на клиенте)
     - Убрать заглушку TODO для этих действий

### 5. Тестирование
   - Протестировать каждую кнопку с реальной англоязычной статьей
   - Проверить обработку ошибок (неверный URL, таймауты, отсутствие API ключа)
   - Проверить отображение результатов в UI
   - Убедиться, что все три функции работают независимо друг от друга

## Технические детали

### Общие требования для всех API роутов:
- Использовать `OPENROUTER_API_KEY` из переменных окружения
- Использовать модель `deepseek/deepseek-chat` от OpenRouter
- Таймаут для AI запросов: 120 секунд
- Таймаут для парсинга: 30 секунд
- Максимальная длина контента: 50000 символов
- Все ответы должны быть на русском языке

### Структура промптов:
- **Summary**: "Опиши кратко, о чем эта статья. Ответ должен быть на русском языке."
- **Theses**: "Составь структурированные тезисы этой статьи в виде списка. Ответ должен быть на русском языке."
- **Telegram**: "Создай пост для Telegram на основе этой статьи. Пост должен быть кратким, структурированным, с эмодзи, готовым для публикации. Ответ должен быть на русском языке."

